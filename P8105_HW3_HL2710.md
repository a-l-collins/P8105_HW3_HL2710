P8105_HW3_HL2710
================
Ainsel Levitskaia-Collins, HL2710
2025-10-08

### Preliminary Setup

Adjusting settings such that figures and graphs will be readable:

``` r
library(tidyverse)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

### Problem 1

Loading the dataset that will be used in this problem:

``` r
library(p8105.datasets)
data("instacart")
```

The `instacart` dataset has 1384617 observations of 15 variables. The
variables include information such as which user made the order
(`user_id`), which items are in the cart (`product_id`), whether these
items are being reordered (`reordered`), the name of the product
(`product_name`), and other such information. For example, the first
item added to user 112108’s cart was Bulgarian Yogurt with a product ID
of 49302, and this is a reordered item.

#### Determining Aisle Information

First, producing a dataset with number of items ordered per aisle:

``` r
instacart_aislecounts <- instacart %>% 
  count(aisle, name = "num_items_ordered") %>% 
  arrange(desc(num_items_ordered))
```

Then, selecting the top 5 most popular aisles:

``` r
instacart_aislecounts %>% slice_head(n = 5)
```

    ## # A tibble: 5 × 2
    ##   aisle                      num_items_ordered
    ##   <chr>                                  <int>
    ## 1 fresh vegetables                      150609
    ## 2 fresh fruits                          150473
    ## 3 packaged vegetables fruits             78493
    ## 4 yogurt                                 55240
    ## 5 packaged cheese                        41699

There are 134 aisles within the `instacart` dataset, and the top 5
aisles that the most items are ordered from are fresh vegetables, fresh
fruits, packaged vegetables and fruits, yogurt, and packaged cheese.

#### Number of Ordered Items per Aisle

Creating a plot that shows the number of items ordered per aisle,
limited to only aisles with more than 10,000 items ordered:

``` r
instacart_aislecounts %>% 
  filter(num_items_ordered > 10000) %>% 
  mutate(aisle = fct_reorder(aisle, desc(num_items_ordered))) %>% 
  ggplot(aes(x = aisle, y = num_items_ordered)) +
  geom_bar(stat = "identity", fill = "chartreuse3", width = .4) +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  xlab("") +
  ylab("Number of Items Ordered")
```

<img src="P8105_HW3_HL2710_files/figure-gfm/unnamed-chunk-5-1.png" width="90%" />

#### Table of Most Popular Items

Creating a table of the three most popular items in the aisles “baking
ingredients”, “dog food care”, and “packaged vegetables fruits”.

1.  Keeping only the desired aisles
2.  Counting by `product_name` after grouping by `aisle` and
    `product_name` so that every product has an associated number of
    times it was ordered
3.  Keeping only the three most popular items per aisle
4.  Converting from long to wide format for readability

First, creating a database with information on aisle name, product name,
and how many times each item has been ordered:

``` r
instacart_popular <- instacart %>% 
  filter(aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  group_by(aisle) %>% 
  count(product_name, name = "num_items_ordered") %>% 
  arrange(desc(num_items_ordered)) %>% 
  filter(min_rank(desc(num_items_ordered)) < 4)
```

Creating a table to display this information:

``` r
knitr::kable(
  instacart_popular,
  col.names = c("Aisle", "Product Name", "Number of Items Ordered")
)
```

| Aisle | Product Name | Number of Items Ordered |
|:---|:---|---:|
| packaged vegetables fruits | Organic Baby Spinach | 3324 |
| packaged vegetables fruits | Organic Raspberries | 1920 |
| packaged vegetables fruits | Organic Blueberries | 1692 |
| baking ingredients | Light Brown Sugar | 157 |
| baking ingredients | Pure Baking Soda | 140 |
| baking ingredients | Organic Vanilla Extract | 122 |
| dog food care | Organix Grain Free Chicken & Vegetable Dog Food | 14 |
| dog food care | Organix Chicken & Brown Rice Recipe | 13 |
| dog food care | Original Dry Dog | 9 |

### Table of Mean hr Day per Week when Pink Lady Apples and Coffee Ice Cream are Ordered

Creating a table in which, for every day of the week, the mean hour of
the day at which Pink Lady Apples and Coffee Ice Cream are ordered is
displayed.

1.  Keeping only the desired products
2.  Grouping by day of week
3.  Creating a mean time of order variable
4.  Using `pivot_wider` to make the data human-readable

I would like to note that while under normal circumstances, I would have
renamed the `order_dow` contents from 0-6 to corresponding days of the
week, I could not find any confirmation online for whether 0
corresponded to Monday, Sunday, or something else, and have as such
chosen to leave `order_dow` in its numerical format.

``` r
instacart_times <- instacart %>% 
  filter(product_name == c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
  group_by(product_name, order_dow) %>% 
  summarize(mean_time = mean(order_hour_of_day, na.rm = TRUE)) %>% 
  pivot_wider(
    names_from = "product_name",
    values_from = "mean_time"
  )
```

Creating a table to display this information:

``` r
knitr::kable(
  instacart_times,
  col.names = c("Day of Week", "Coffee Ice Cream (military time)", "Pink Lady Apples (military time)"),
  digits = 0
)
```

| Day of Week | Coffee Ice Cream (military time) | Pink Lady Apples (military time) |
|---:|---:|---:|
| 0 | 13 | 12 |
| 1 | 15 | 12 |
| 2 | 15 | 12 |
| 3 | 15 | 14 |
| 4 | 15 | 12 |
| 5 | 10 | 14 |
| 6 | 12 | 12 |
